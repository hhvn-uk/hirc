#!/bin/sh

CC=${CC:-cc}

trap "rm -f test.c test" EXIT
echo "# Generated by configure" > config.mk

printf '%s' "checking for libtls... "
cat > test.c <<- EOF
	#include <tls.h>
	int main(void) { return 0; }
EOF
${CC} -ltls -o test test.c >/dev/null 2>/dev/null && {
	printf '%s\n' "yes"
	cat >> config.mk <<- EOF
		LDFLAGS	+= -ltls
		CFLAGS	+= -DTLS
	EOF
} || printf '%s\n' "no"

printf '%s' "checking for libtinfow... "
cat > test.c <<- EOF
	#include <ncurses.h>
	int main(void) { return 0; }
EOF
${CC} -ltinfow -o test test.c >/dev/null 2>/dev/null && {
	printf '%s\n' "yes"
	cat >> config.mk <<- EOF
		LDFLAGS += -ltinfow
	EOF
} || printf '%s\n' "no"
